import{r as m,j as e}from"./main-CbopZ6M6.js";import{F as x,a as f,b as h,c as j,d as w,g as b,G as v}from"./DocsCommentsSection-w38vTm24.js";import{F,p as E}from"./pdf.worker-Bk3dBqSY.js";v.workerSrc=E;const G=({fileType:t,downloadUrl:s,fileName:i})=>{const[o,r]=m.useState(null);if(m.useEffect(()=>((t==="application/pdf"||t==="pdf")&&s?(async l=>{try{const c=await fetch(l,{method:"GET",headers:{"Content-Type":"application/pdf"}});if(!c.ok)throw new Error("Failed to fetch PDF");const u=await c.arrayBuffer(),p=await(await b({data:u}).promise).getPage(1),n=p.getViewport({scale:1}),a=document.createElement("canvas"),g=a.getContext("2d");if(!g)throw new Error("Failed to get canvas context");a.width=n.width,a.height=n.height,await p.render({canvas:a,canvasContext:g,viewport:n}).promise;const d=a.toDataURL("image/png");r(d),a.remove()}catch(c){console.error("Error generating PDF thumbnail:",c),r(null)}})(s):r(null),()=>{o&&URL.revokeObjectURL(o)}),[t,s]),["image","jpg","jpeg","image/jpeg","image/png","gif","svg","png","webp","image/webp","image/svg+xml"].includes(t))return e.jsx("img",{src:s,alt:i||"Image preview",className:"h-28 w-full object-cover object-top"});if(t==="application/pdf"||t==="pdf")return o?e.jsx("img",{src:o,alt:i||"PDF preview",className:"h-28 w-full object-cover object-top"}):e.jsx(x,{});switch(t){case"audio":return e.jsx(w,{});case"document":case"docx":case"doc":case"application/msword":return e.jsx(j,{});case"xlsx":case"xls":case"csv":return e.jsx(h,{});case"text":case"txt":case"text/plain":case"text/csv":return e.jsx(F,{});default:return e.jsx(f,{})}};export{G as U};
