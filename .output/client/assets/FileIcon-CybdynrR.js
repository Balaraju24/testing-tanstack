import{r as u,j as t}from"./main-CbopZ6M6.js";import{F as g,a as h,b as w,c as j,d as F,g as v,G as b}from"./DocsCommentsSection-w38vTm24.js";import{F as E,p as k}from"./pdf.worker-Bk3dBqSY.js";import{i as D}from"./statusConstants-CRfW9VUD.js";b.workerSrc=k;const S=(e,s,i)=>{const[o,c]=u.useState(null),m=async d=>{try{const r=await fetch(d,{method:"GET",headers:{"Content-Type":"application/pdf"}});if(!r.ok)throw new Error("Failed to fetch PDF");const f=await r.arrayBuffer(),p=await(await v({data:f}).promise).getPage(1),n=p.getViewport({scale:1}),a=document.createElement("canvas"),l=a.getContext("2d");if(!l)throw new Error("Failed to get canvas context");a.width=n.width,a.height=n.height,await p.render({canvas:a,canvasContext:l,viewport:n}).promise;const x=a.toDataURL("image/png");c(x),a.remove()}catch(r){console.error("Error generating PDF thumbnail:",r),c(null)}finally{}};if(u.useEffect(()=>((e==="application/pdf"||e==="pdf")&&s?m(s):c(null),()=>{o&&URL.revokeObjectURL(o)}),[e,s]),D.includes(e))return t.jsx("img",{src:s,alt:i||"Image preview",className:"h-28 w-full object-cover object-top"});if(e==="application/pdf"||e==="pdf")return o?t.jsx("img",{src:o,alt:i||"PDF preview",className:"h-28 w-full object-cover object-top cursor-pointer"}):t.jsx(g,{});switch(e){case"audio":return t.jsx(F,{});case"document":case"docx":case"doc":case"application/msword":return t.jsx(j,{});case"xlsx":case"xls":case"csv":return t.jsx(w,{});case"text":case"txt":case"text/plain":case"text/csv":return t.jsx(E,{});default:return t.jsx(h,{})}};export{S as g};
