import{c as D}from"./createLucideIcon-2fvSvvVa.js";import{j as e,r as g,B as v,R as L}from"./main-CbopZ6M6.js";import{L as k}from"./litigation-icon-DVtOXpxK.js";import{C as O}from"./check-CKzaR09m.js";import{P as M,a as Y,b as S}from"./popover-CoI_Kke6.js";import{C as q,a as F,b as I,c as H,d as P,e as z,f as T}from"./command-P1h1coax.js";import{X as _}from"./x-ClszbkRs.js";import{L as E}from"./loader-circle-CHBElFpm.js";import{C as $}from"./calendar-B2nKypLE.js";import{S as K}from"./separator-CIw6DZcG.js";import{d as r}from"./dayjs.min-BPVt0UoP.js";import{S as Z,a as B,b as R,c as A,e as G,d as W}from"./select-BAZmUwVY.js";import{C as Q}from"./calendar-CPLYzr7c.js";import{l as U,o as X,O as J,m as ee,n as ae}from"./dashboard-DoA9sCnn.js";import{u as w}from"./useQuery-aXFamHAp.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],se=D("chevrons-up-down",te);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Le=D("map-pin",oe),re=({className:a})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"11",height:"16",viewBox:"0 0 11 16",fill:"none",className:a,children:e.jsx("path",{d:"M9.85413 0.6875H1.97913C1.68076 0.6875 1.39461 0.806026 1.18363 1.017C0.972652 1.22798 0.854126 1.51413 0.854126 1.8125V4.34375C0.854506 4.51833 0.895336 4.69045 0.973412 4.84661C1.05149 5.00276 1.16469 5.1387 1.30413 5.24375L4.97936 8L1.30413 10.7562C1.16469 10.8613 1.05149 10.9972 0.973412 11.1534C0.895336 11.3095 0.854506 11.4817 0.854126 11.6562V14.1875C0.854126 14.4859 0.972652 14.772 1.18363 14.983C1.39461 15.194 1.68076 15.3125 1.97913 15.3125H9.85413C10.1525 15.3125 10.4386 15.194 10.6496 14.983C10.8606 14.772 10.9791 14.4859 10.9791 14.1875V11.6816C10.9787 11.5076 10.9382 11.3362 10.8608 11.1804C10.7834 11.0247 10.6711 10.8889 10.5326 10.7837L6.84967 8L10.5326 5.21563C10.6711 5.11057 10.7835 4.97494 10.8609 4.81931C10.9384 4.66368 10.9788 4.49227 10.9791 4.31844V1.8125C10.9791 1.51413 10.8606 1.22798 10.6496 1.017C10.4386 0.806026 10.1525 0.6875 9.85413 0.6875ZM9.85413 1.8125V2.9375H1.97913V1.8125H9.85413ZM9.85413 14.1875H1.97913V11.6562L5.91663 8.70312L9.85413 11.6809V14.1875ZM5.91663 7.29688L1.97913 4.34375V4.0625H9.85413V4.31844L5.91663 7.29688Z",fill:"currentColor"})}),ne=({className:a})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"15",viewBox:"0 0 16 15",fill:"none",className:a,children:e.jsx("path",{d:"M15.8333 1.1499V4.8999C15.8333 5.06566 15.7674 5.22463 15.6502 5.34184C15.533 5.45905 15.374 5.5249 15.2083 5.5249H11.4583C11.2925 5.5249 11.1335 5.45905 11.0163 5.34184C10.8991 5.22463 10.8333 5.06566 10.8333 4.8999C10.8333 4.73414 10.8991 4.57517 11.0163 4.45796C11.1335 4.34075 11.2925 4.2749 11.4583 4.2749H13.6997L12.5567 3.13193C11.3951 1.96506 9.818 1.30674 8.17153 1.30146H8.13638C6.5037 1.29763 4.93514 1.93668 3.76997 3.08037C3.65061 3.19179 3.49239 3.25208 3.32915 3.24833C3.1659 3.24459 3.01061 3.17711 2.89649 3.06033C2.78236 2.94355 2.71847 2.78675 2.71848 2.62346C2.71849 2.46018 2.7824 2.30338 2.89653 2.18662C4.30867 0.806458 6.20811 0.0388668 8.18265 0.0504216C10.1572 0.0619763 12.0475 0.851745 13.4434 2.24834L14.5833 3.3913V1.1499C14.5833 0.984138 14.6491 0.825167 14.7663 0.707957C14.8835 0.590747 15.0425 0.524899 15.2083 0.524899C15.374 0.524899 15.533 0.590747 15.6502 0.707957C15.7674 0.825167 15.8333 0.984138 15.8333 1.1499ZM12.8965 11.7194C11.7198 12.8688 10.1375 13.508 8.49258 13.4984C6.8477 13.4887 5.27294 12.831 4.10981 11.6679L2.96685 10.5249H5.20825C5.37401 10.5249 5.53298 10.4591 5.65019 10.3418C5.7674 10.2246 5.83325 10.0657 5.83325 9.8999C5.83325 9.73414 5.7674 9.57517 5.65019 9.45796C5.53298 9.34075 5.37401 9.2749 5.20825 9.2749H1.45825C1.29249 9.2749 1.13352 9.34075 1.01631 9.45796C0.8991 9.57517 0.833252 9.73414 0.833252 9.8999V13.6499C0.833252 13.8157 0.8991 13.9746 1.01631 14.0918C1.13352 14.2091 1.29249 14.2749 1.45825 14.2749C1.62401 14.2749 1.78298 14.2091 1.90019 14.0918C2.0174 13.9746 2.08325 13.8157 2.08325 13.6499V11.4085L3.22622 12.5515C4.62014 13.9524 6.51325 14.7426 8.4895 14.7483H8.53091C10.4903 14.7534 12.3729 13.9863 13.7708 12.6132C13.8849 12.4964 13.9488 12.3396 13.9488 12.1763C13.9488 12.013 13.8849 11.8562 13.7708 11.7395C13.6567 11.6227 13.5014 11.5552 13.3381 11.5515C13.1749 11.5477 13.0167 11.608 12.8973 11.7194H12.8965Z",fill:"#F2C94C"})}),De=a=>{switch(a){case"cases":return e.jsx("div",{className:"p-1 bg-green-200",children:e.jsx(k,{className:"w-3.5 h-3.5 text-green-700"})});case"to_start":return e.jsx("div",{className:"p-1 bg-blue-100",children:e.jsx(re,{className:"w-3.5 h-3.5 text-blue-500"})});case"progress":return e.jsx("div",{className:"p-1 bg-orange-100",children:e.jsx(ne,{className:"w-3.5 h-3.5 text-orange-500"})});case"completed":return e.jsx("div",{className:"p-1 bg-green-100",children:e.jsx(O,{className:"w-4 h-4 text-green-900"})});default:return null}};function Oe({items:a=[],value:s,onChange:t,placeholder:l="Select...",className:i,contentClassName:n,itemClassName:c,defaultIcon:o,enableApiSearch:u,onSearchChange:d,isLoading:p=!1}){const[x,f]=g.useState(!1),[y,j]=g.useState(""),h=g.useRef(null),C=g.useMemo(()=>s?a.find(m=>m.id===s.id)??null:null,[s,a]),N=g.useMemo(()=>{if(u||!y)return a;const m=y.toLowerCase();return a.filter(b=>b.label.toLowerCase().includes(m))},[a,y,u]),V=o??T;return g.useEffect(()=>{if(!u)return;const m=setTimeout(()=>{d?.(y)},500);return()=>clearTimeout(m)},[y,d,u]),e.jsxs(M,{open:x,onOpenChange:f,children:[e.jsx(Y,{asChild:!0,children:e.jsxs(v,{variant:"outline",role:"combobox",className:`w-40 justify-between ${i??""}`,children:[C?e.jsx("div",{className:"flex items-center gap-2 min-w-0",children:e.jsx("span",{className:"truncate",title:C.label,children:C.label})}):e.jsx("span",{className:"text-muted-foreground",children:l}),C?e.jsx("button",{className:"cursor-pointer",onClick:m=>{m.stopPropagation(),t(null)},children:e.jsx(_,{className:"h-4 w-4 opacity-70 "})}):e.jsx(se,{className:"h-4 w-4 opacity-70 "})]})}),e.jsx(S,{className:`w-[260px] p-0 ${n??""}`,children:e.jsxs(q,{shouldFilter:!1,children:[e.jsx(F,{placeholder:"Search...",value:y,onValueChange:j}),e.jsx(I,{ref:h,className:"max-h-60 overflow-y-auto",children:p?e.jsx("div",{className:"flex items-center justify-center py-6",children:e.jsx(E,{className:"h-5 w-5 animate-spin text-muted-foreground"})}):e.jsxs(e.Fragment,{children:[e.jsx(H,{children:"No results."}),e.jsx(P,{children:N.map(m=>{const b=C?.id===m.id;return m.icon,e.jsxs(z,{"data-combobox-item":!0,onSelect:()=>{f(!1),u||j(""),t(m)},className:`flex justify-between items-center ${c??""} ${b?"bg-accent":""}`,children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("div",{className:"capitalize text-sm",children:m.label})}),b?e.jsx(O,{className:"h-4 w-4"}):null]},m.id)})})]})},N.map(m=>m.id).join(","))]})})]})}const ce=({className:a})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"8",viewBox:"0 0 12 8",fill:"none",className:a,children:e.jsx("path",{d:"M6.28696 7.3C6.00844 7.65588 5.46982 7.65588 5.1913 7.3L0.358219 1.12439C0.000850365 0.667751 0.326195 4.09955e-07 0.906049 4.60647e-07L10.5722 1.30569e-06C11.1521 1.35638e-06 11.4774 0.667752 11.12 1.12439L6.28696 7.3Z",fill:"black"})});function le(a){const{options:s,value:t,onChange:l}=a,i=n=>{l&&l({target:{value:n}})};return e.jsxs(Z,{value:t?.toString(),onValueChange:i,children:[e.jsx(B,{className:" h-fit py-1  ",children:e.jsx(R,{})}),e.jsx(A,{className:"bg-white border-gray-200 h-[40vh]",children:e.jsx(G,{children:s?.map(n=>e.jsx(W,{value:n.value.toString(),disabled:n.disabled,children:n.label},n.value))})})]})}const Me=({date:a,setDate:s,mode:t="day",align:l})=>{const[i,n]=L.useState(a);r();const[c,o]=L.useState(!1),u=()=>a?.from?a.to?r(a.from).isSame(a.to,"day")?r(a.from).format("DD/MM/YYYY"):`${r(a.from).format("DD/MM/YYYY")} - ${r(a.to).format("DD/MM/YYYY")}`:r(a.from).format("DD/MM/YYYY"):"Date",d=[{label:"Today",action:()=>s({from:r().startOf("day").toDate(),to:r().startOf("day").toDate()})},{label:"Yesterday",action:()=>s({from:r().subtract(1,"day").startOf("day").toDate(),to:r().subtract(1,"day").endOf("day").toDate()})},{label:"Tomorrow",action:()=>s({from:r().add(1,"day").startOf("day").toDate(),to:r().add(1,"day").endOf("day").toDate()})}],p=[{label:"This Month",action:()=>s({from:r().startOf("month").toDate(),to:r().endOf("month").toDate()})}],x=[{label:"Last 3 Months",action:()=>s({from:r().subtract(3,"month").startOf("day").toDate(),to:r().endOf("day").toDate()})},{label:"Last 6 Months",action:()=>s({from:r().subtract(6,"month").startOf("day").toDate(),to:r().endOf("day").toDate()})},{label:"This Year",action:()=>s({from:r().startOf("year").toDate(),to:r().endOf("year").toDate()})},{label:"Last Year",action:()=>s({from:r().subtract(1,"year").startOf("year").toDate(),to:r().subtract(1,"year").endOf("year").toDate()})}];let f=[];t==="day"&&(f=d),t==="day-month"&&(f=[...d,...p]),t==="day-year"&&(f=[...d,...p,...x]),t==="month"&&(f=p),t==="year"&&(f=x),t==="month-year"&&(f=[...p,...x]);const y=()=>{s(i),o(!1)},j=()=>s(void 0);return e.jsxs(M,{open:c,onOpenChange:h=>{o(h)},children:[e.jsx(Y,{asChild:!0,children:e.jsxs(v,{className:"border w-fit text-smd font-normal items-center border-gray-300 py-1.5 h-8 rounded-none px-2 ",children:[e.jsx(Q,{className:"mr-0.5 h-4 w-4 shrink-0"}),e.jsx("span",{className:"text-xs",children:u()}),a?e.jsx(e.Fragment,{children:e.jsx("span",{onClick:h=>{h.stopPropagation(),j()},children:e.jsx(_,{className:"ml-0.5 h-4 w-4 shrink-0 cursor-pointer"})})}):e.jsx(ce,{className:"ml-1 !h-3 !w-3 shrink-0"})]})}),e.jsxs(S,{align:l,sideOffset:4,className:"flex w-fit mr-2 gap-2 p-2 bg-white  border border-gray-300",children:[e.jsxs("div",{className:"flex flex-col justify-between h-68",children:[e.jsx("div",{className:"flex flex-col",children:f.map(h=>e.jsx(v,{variant:"ghost",className:"justify-start py-1.5 hover:bg-gray-100 text-sm font-light h-fit px-1",onClick:()=>{h.action(),o(!1)},children:h.label},h.label))}),e.jsx(v,{variant:"destructive",size:"sm",className:"mt-2 text-sm bg-gray-200 hover:bg-gray-400  py-1.5 h-fit px-1",onClick:y,children:"OK"})]}),e.jsx("div",{className:"flex-1 h-68 w-[0.5px] bg-gray-300",children:e.jsx(K,{orientation:"vertical"})}),e.jsx("div",{className:"flex flex-col justify-between ",children:e.jsx($,{mode:"range",selected:i,onSelect:n,classNames:{range_middle:"bg-gray-100 ",day:"hover:bg-gray-100 w-full flex items-center justify-center data-[range-start=true]:bg-black",weekday:"text-sm flex justify-center font-normal w-full"},captionLayout:"dropdown",components:{Dropdown:le},modifiers:{today:new Date},modifiersClassNames:{today:"bg-blue-200 text-blue-900 rounded-sm"}})})]})]})},Ye=new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",currencyDisplay:"symbol",minimumFractionDigits:2}),ie=a=>{const s=["january","february","march","april","may","june","july","august","september","october","november","december"],t={},l=new Set;a.forEach(c=>{const o=c.organization_name||"",u=c.month?.toLowerCase()||"";l.add(u),t[o]||(t[o]={name:o,data:{},total:{lop:{cases:0,revenue:0},eop:{cases:0,revenue:0},litigation:{cases:0,revenue:0}},location:c.location_name||""}),t[o].data[u]||(t[o].data[u]={lop:{cases:0,revenue:0},eop:{cases:0,revenue:0},litigation:{cases:0,revenue:0}}),c.service_types?.forEach(d=>{const p=d.service_type==="Legal opinion"?t[o].data[u].lop:d.service_type==="Litigation"?t[o].data[u].litigation:t[o].data[u].eop;p.cases+=d.cases_count,p.revenue+=d.revenue;const x=d.service_type==="Legal opinion"?t[o].total.lop:d.service_type==="Litigation"?t[o].total.litigation:t[o].total.eop;x.cases+=d.cases_count,x.revenue+=d.revenue})});const i=Array.from(l).sort((c,o)=>s.indexOf(c)-s.indexOf(o));return{organizations:Object.values(t).map(c=>({name:c.name,data:i.map(o=>({month:o,lop:c.data[o]?.lop||{cases:0,revenue:0},eop:c.data[o]?.eop||{cases:0,revenue:0},litigation:c.data[o]?.litigation||{cases:0,revenue:0}})),total:c.total,location:c.location})),months:i}},Se=({search_string:a,enabled:s})=>{const{data:t,isLoading:l}=w({queryKey:["locations",a],queryFn:async()=>{const i={page:1,page_size:50,...a?{search_string:a}:{}};return(await U(i)).data?.data},enabled:s});return{data:t,isLoading:l}},_e=({dateRange:a,organization:s,location:t})=>{const{data:l,isLoading:i}=w({queryKey:["organizationsStats",a,s,t],refetchOnWindowFocus:!1,queryFn:async()=>{let n={};a&&(n={from_date:r(a?.from).format("YYYY-MM-DD"),to_date:r(a?.to).format("YYYY-MM-DD")}),s&&(n={...n,user_id:s}),t&&(n={...n,location_id:t});const o=(await J(n)).data?.data;return ie(o)}});return{data:l,isLoading:i}},Ve=(a,s)=>{const{data:t,isLoading:l}=w({queryKey:["orgsDropdown",a],queryFn:async()=>{let i={};return a&&(i={search_string:a}),(await X({page:1,page_size:50,...i})).data?.data},enabled:s,refetchOnWindowFocus:!1});return{data:t,isLoading:l}},ke=a=>{const{data:s,isLoading:t}=w({queryKey:["AdvOrgsDropdown"],queryFn:async()=>(await ee()).data?.data,enabled:a,refetchOnWindowFocus:!1});return{data:s,isLoading:t}},qe=a=>{const{data:s,isLoading:t}=w({queryKey:["AdvLocsDropdown"],queryFn:async()=>(await ae()).data?.data,enabled:a});return{data:s,isLoading:t}};export{Oe as C,Ye as I,Le as M,Se as a,Ve as b,Me as c,ke as d,qe as e,De as g,_e as u};
