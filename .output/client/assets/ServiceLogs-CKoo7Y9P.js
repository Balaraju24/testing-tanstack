import{h as f,r as d,j as e}from"./main-Cfdx-166.js";import{L as h}from"./Loading-CBYA94ZU.js";import{d as j}from"./service-7i-FAUkJ.js";import{u as v}from"./useInfiniteQuery-CsBoIoE-.js";import{d as x}from"./dayjs.min-CmsQqqGy.js";import{T as b}from"./TabValuesForViewCase-JKzxB9xn.js";const _=()=>{const{service_id:m}=f({strict:!1}),g=async({pageParam:t=1})=>{let s=await j(m,{page:t,page_size:15});return{data:s?.data?.data?.records,nextCursor:s?.data?.data?.pagination_info?.next_page?s?.data?.data?.pagination_info?.current_page+1:null,prevCursor:s?.data?.data?.pagination_info?.current_page!=1?s?.data?.data?.pagination_info?.current_page-1:null,totalRecords:s?.data?.data?.pagination_info?.total_records}},{data:u,fetchNextPage:l,hasNextPage:c,isLoading:i,isFetchingNextPage:a}=v({initialPageParam:1,queryKey:["case-logs"],queryFn:g,getNextPageParam:t=>t.nextCursor,getPreviousPageParam:t=>t.prevCursor}),r=d.useRef(null),p=d.useCallback(t=>{a||(r.current&&r.current.disconnect(),r.current=new IntersectionObserver(n=>{n[0].isIntersecting&&c&&l()}),t&&r.current.observe(t))},[a,c,l]),o=u?.pages.map(t=>t.data).flat()||[];return e.jsxs("div",{className:"border border-gray-300",children:[e.jsx(b,{}),e.jsxs("div",{className:"h-[calc(100vh-155px)] overflow-auto relative p-4",children:[i&&!a?e.jsx(h,{loading:i,message:"Logs"}):o?.length>0?o?.map((t,n)=>{const s=n===o.length-1;return e.jsxs("div",{ref:s?p:null,className:"flex items-center gap-2 justify-start mb-1 hover:bg-gray-200 transition-colors duration-300 ease-in-out rounded-md py-1 px-2",children:[e.jsx("div",{className:"flex items-center justify-center w-3 h-3  bg-black text-white rounded-full",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{className:"flex items-center gap-2 justify-start",children:[e.jsxs("span",{className:"space-x-1 shrink-0",children:[e.jsx("span",{className:"font-medium text-black text-xs 3xl:text-sm",children:x(t.created_at).format("MMM DD")}),e.jsx("span",{className:"font-medium text-black text-xs 3xl:text-sm before:content-['['] space-x-0 after:content-[']']",children:x(t.created_at).format("hh:mm A")})]}),e.jsx("span",{className:"text-gray-600 text-sm mt-1 3xl:text-base font-light",children:t.description})]})]},t.id)}):!i&&e.jsx("div",{className:" max-w-full mx-auto",children:e.jsxs("div",{className:"bg-gray-100 hover:bg-gray-200 transition-colors duration-300 flex items-center gap-4 p-4 rounded-lg shadow-md",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-blue-500 text-white rounded-full",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:"Log Title"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Log description goes here."})]})]})}),a&&e.jsx("div",{className:"flex justify-center py-2",children:e.jsx("div",{className:"w-5 h-5 border-2 border-gray-300 border-t-black rounded-full animate-spin"})})]})]})};export{_ as S};
