import{j as e,c as y,o as G,r as x,i as K}from"./main-Cfdx-166.js";import{N as B}from"./NoDataBlock-gmsqOTLj.js";import{u as E}from"./index-FfAIZCaX.js";import{S as O,a as U,b as H,c as q,d as J,u as Q,f as I,h as X,i as Y,g as Z}from"./select-CFrWO_XW.js";import{S as M}from"./skeleton-CvqsTR7_.js";import{I as D}from"./input-DYbhqlvz.js";import{a as F,C as ee}from"./chevron-right-B9rEYsY4.js";import{c as se}from"./createLucideIcon-BmLFQ-XG.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],ae=se("ellipsis",te),le=({className:a})=>e.jsx("svg",{className:a,xmlns:"http://www.w3.org/2000/svg",width:"668",height:"668",viewBox:"0 0 668 668",fill:"none",children:e.jsx("path",{d:"M445.667 236.333L334.333 125L223 236.333",stroke:"white",strokeWidth:"66.6667",strokeLinecap:"round",strokeLinejoin:"round"})}),ne=({className:a})=>e.jsx("svg",{className:a,xmlns:"http://www.w3.org/2000/svg",width:"668",height:"668",viewBox:"0 0 668 668",fill:"none",children:e.jsx("path",{d:"M223 432L334.333 543.333L445.667 432",stroke:"white",strokeWidth:"66.6667",strokeLinecap:"round",strokeLinejoin:"round"})}),re=({className:a})=>e.jsxs("svg",{className:a,xmlns:"http://www.w3.org/2000/svg",width:"668",height:"668",viewBox:"0 0 668 668",fill:"none",children:[e.jsx("path",{d:"M223 432L334.333 543.333L445.667 432",stroke:"#fff",strokeWidth:"66.6667",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M445.667 236.333L334.333 125L223 236.333",stroke:"#fff",strokeWidth:"66.6667",strokeLinecap:"round",strokeLinejoin:"round"})]});function oe({className:a,...n}){return e.jsx("nav",{role:"navigation","aria-label":"pagination","data-slot":"pagination",className:y("mx-auto flex w-full justify-center",a),...n})}function R({className:a,...n}){return e.jsx("ul",{"data-slot":"pagination-content",className:y("flex flex-row items-center gap-1",a),...n})}function P({...a}){return e.jsx("li",{"data-slot":"pagination-item",...a})}function T({className:a,isActive:n,size:m="icon",...u}){return e.jsx("a",{"aria-current":n?"page":void 0,"data-slot":"pagination-link","data-active":n,className:y(G({variant:n?"outline":"ghost",size:m}),a),...u})}function ie({className:a,...n}){return e.jsxs(T,{"aria-label":"Go to previous page",size:"default",className:y("gap-1 px-2.5 sm:pl-2.5",a),...n,children:[e.jsx(F,{}),e.jsx("span",{className:"hidden sm:block",children:"Previous"})]})}function ce({className:a,...n}){return e.jsxs(T,{"aria-label":"Go to next page",size:"default",className:y("gap-1 px-2.5 sm:pr-2.5",a),...n,children:[e.jsx("span",{className:"hidden sm:block",children:"Next"}),e.jsx(ee,{})]})}function de({className:a,...n}){return e.jsxs("span",{"aria-hidden":!0,"data-slot":"pagination-ellipsis",className:y("flex size-9 items-center justify-center",a),...n,children:[e.jsx(ae,{className:"size-4"}),e.jsx("span",{className:"sr-only",children:"More pages"})]})}const xe=({capturePageNum:a,captureRowPerItems:n,initialPage:m=1,limitOptionsFromProps:u=[],paginationDetails:h})=>{const[p,b]=x.useState(m.toString()),[v,z]=x.useState(u.length?u:[{title:"15/page",value:15},{title:"25/page",value:25},{title:"100/page",value:100},{title:"250/page",value:250},{title:"500/page",value:500}]),i=h?.total_pages??1,j=h?.page_size??15,w=h?.total_records??0,o=h?.current_page??m,d=o*j,L=d-j,f=x.useCallback(s=>{s>=1&&s<=i&&(b(s.toString()),a(s))},[a,i]),C=x.useCallback(s=>{n(Number(s))},[n]),_=x.useCallback(s=>{const g=s.target.value;(g===""||/^[0-9]+$/.test(g))&&b(g)},[]),N=x.useCallback(s=>{if(s.key==="Enter"){const g=Math.max(1,Math.min(parseInt(p)||1,i));f(g)}},[p,i,f]),$=x.useCallback(()=>{const s=[];if(i<=5)for(let r=1;r<=i;r++)s.push(r);else if(o<=3){for(let r=1;r<=4;r++)s.push(r);s.push(null),s.push(i)}else if(o>=i-2){s.push(1),s.push(null);for(let r=i-3;r<=i;r++)s.push(r)}else{s.push(1),s.push(null);for(let r=o-1;r<=o+1;r++)s.push(r);s.push(null),s.push(i)}return s},[o,i]);return e.jsxs(oe,{className:"flex justify-between items-center !mx-0 !px-0 sticky bottom-0 shadow-inner-none !shadow-none !bordeer-none",children:[e.jsxs(R,{className:"!px-0 pt-1 flex gap-5",children:[e.jsxs(O,{value:j?.toString(),onValueChange:C,children:[e.jsx(U,{className:"w-24 text-xs !py-0 !h-8 border cursor-pointer",children:e.jsx(H,{placeholder:"Items per page",className:"font-normal text-xs!rounded-none "})}),e.jsx(q,{className:"w-[120px]  text-xs bg-white pointer",children:v.map(s=>e.jsx(J,{value:s.value?.toString(),className:"cursor-pointer font-normal text-xs opacity-90",children:s.title},s.value))})]}),e.jsxs("div",{className:"font-normal text-xs opacity-80",children:[Math.min(L+1,w)," -"," ",Math.min(d,w)," of ",w]})]}),e.jsxs("div",{className:"flex justify-end items-center",children:[e.jsx(R,{className:"px-1 py-0",children:e.jsxs("div",{className:"flex items-center font-normal text-xs opacity-80",children:["GoTo",e.jsx(D,{value:p,onChange:_,onKeyDown:N,className:"h-6 w-10 text-center bg-gray-300 rounded-none text-xs ml-2",placeholder:"Page"})]})}),e.jsxs(R,{className:"px-1 py-0 font-normal",children:[e.jsx(P,{children:e.jsx(ie,{href:o===1?void 0:"#",onClick:s=>{s.preventDefault(),o>1&&f(o-1)},"aria-disabled":o===1,className:o===1?"opacity-50 ":""})}),$().map((s,g)=>s===null?e.jsx(P,{children:e.jsx(de,{})},`ellipsis-${g}`):e.jsx(P,{children:e.jsx(T,{href:"#",isActive:s===o,onClick:r=>{r.preventDefault(),f(s)},className:`text-xs ${s===o?"bg-black text-white w-6 h-6 rounded-none ":"rounded-none"}`,children:s})},s)),e.jsx(P,{children:e.jsx(ce,{href:o===i?void 0:"#",onClick:s=>{s.preventDefault(),o<i&&f(o+1)},"aria-disabled":o===i,className:o===i?"opacity-50 ":""})})]})]})]})},ye=({columns:a,data:n,loading:m=!1,getData:u,paginationDetails:h,removeSortingForColumnIds:p,heightClass:b,noDataLabel:v,noDataDescription:z,showNoDataIcon:i=!0,noDataHeight:j})=>{const w=K(),o=E(),d=new URLSearchParams(o?.search),[L,f]=x.useState([]),C=a.length>6,_=a.length-1,N=Q({columns:a,data:n?.length?n:[],state:{sorting:L},onSortingChange:f,getCoreRowModel:Z(),getFilteredRowModel:Y(),getSortedRowModel:X()}),$=x.useCallback(l=>{u({...d,page_size:d.get("page_size")?Number(d.get("page_size")):15,page:l,order_by:d.get("order_by"),order_type:d.get("order_type")})},[u,d]),s=x.useCallback(l=>{u({...d,page_size:l,page:1,order_by:d.get("order_by"),order_type:d.get("order_type")})},[u,d]),g=x.useCallback(l=>{if(p&&p.length&&p.includes(l.id))return;let t=l.id,c=`${t}:asc`;d.get("order_by")?.startsWith(l.id)&&(d.get("order_by")===`${l.id}:asc`?c=`${t}:desc`:(t="",c="")),u({...d,page:1,page_size:d.get("page_size")||h?.page_size||15,order_by:c})},[u,d,p,h?.page_size]),r=x.useCallback(l=>{const t=a.find(c=>c.id===l);return t&&(t?.width||t?.size)||"100px"},[a]),S=x.useCallback(l=>C&&l===_,[C,_]),V=x.useCallback((l,t)=>{const c={minWidth:r(l),width:r(l)};return S(t)?{...c,position:"sticky",right:0,backgroundColor:"black",zIndex:11}:{...c,position:"sticky",top:0,backgroundColor:"black",zIndex:10}},[r,S]),W=x.useCallback((l,t)=>S(l)?{position:"sticky",right:0,backgroundColor:t?"white":"#f9fafb",zIndex:5}:{},[S]);return e.jsxs("div",{className:"w-full rounded-md bg-white",children:[e.jsx("div",{className:`w-full relative bg-white ${b||"h-96"} overflow-auto custom-scrollbar`,style:{display:"flex",flexDirection:"column"},children:m?e.jsx("div",{className:"w-full h-full flex flex-col",children:e.jsxs("table",{className:"w-full border-collapse bg-white min-w-full table-fixed",children:[e.jsx("thead",{className:"bg-black border-b",children:N?.getHeaderGroups().map(l=>e.jsx("tr",{className:"border-b",children:l.headers.map((t,c)=>e.jsx("th",{colSpan:t.colSpan,className:"bg-black text-left px-3 py-2 text-sm font-normal text-white sticky top-0 z-10",style:V(t.id,c),children:t.isPlaceholder?null:e.jsxs("div",{onClick:()=>g(t),className:"flex items-center gap-2 cursor-pointer",children:[I(t.column.columnDef.header,t.getContext()),e.jsx(A,{header:t,removeSortingForColumnIds:p})]})},`${t.id}-${c}`))},l.id))}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:[...Array(h?.page_size||15)].map((l,t)=>e.jsx("tr",{className:`border-b border-b-gray-100 ${t%2===0?"bg-white":"bg-gray-50"}`,children:[...Array(a.length)].map((c,k)=>e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 whitespace-nowrap",style:W(k,t%2===0),children:k===1?e.jsxs("div",{className:"p-2 flex gap-2 items-center",children:[e.jsx(M,{className:"h-7 w-7 rounded-full bg-gray-200"}),e.jsx(M,{className:"h-3 w-3/5 bg-gray-200 rounded-none"})]}):e.jsx("div",{className:"p-2",children:e.jsx(M,{className:"h-3 w-3/5 bg-gray-200 rounded-none"})})},`loading-cell-${t}-${k}`))},`loading-row-${t}`))})]})}):n.length?e.jsx("div",{className:"w-full h-full flex flex-col",children:e.jsx("div",{className:"w-full overflow-auto custom-scrollbar",children:e.jsxs("table",{className:"w-full border border-gray-200 border-collapse bg-white min-w-full table-fixed",children:[e.jsx("thead",{className:"bg-black border-b",children:N?.getHeaderGroups().map(l=>e.jsx("tr",{className:"border-b",children:l.headers.map((t,c)=>e.jsx("th",{colSpan:t.colSpan,className:"bg-black text-left px-3 py-2 text-sm font-normal text-white/90 sticky top-0 z-10",style:V(t.id,c),children:t.isPlaceholder?null:e.jsxs("div",{onClick:()=>g(t),className:"flex items-center gap-2 cursor-pointer",children:[I(t.column.columnDef.header,t.getContext()),e.jsx(A,{header:t,removeSortingForColumnIds:p})]})},`${t.id}-${c}`))},l.id))}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:n?.length?N?.getRowModel().rows.map((l,t)=>e.jsx("tr",{className:`transition-colors duration-200 border-b border-b-gray-100 cursor-pointer ${t%2===0?"bg-white hover:bg-gray-100":"bg-gray-50 hover:bg-gray-100"}`,...l?.original.issue_id&&l?.original.id?{onClick:()=>w.navigate({to:`/cases/${l.original.id}/case-history`})}:{},children:l.getVisibleCells().map((c,k)=>e.jsx("td",{className:"px-4 py-2 text-sm text-gray-900 whitespace-nowrap",style:W(k,t%2===0),children:I(c.column.columnDef.cell,c.getContext())},c.id))},l.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:a.length,className:"text-center py-8",children:e.jsx(B,{title:v||"No Data Available",description:z,showIcon:i,height:j||b||"h-96"})})})})]})})}):e.jsx(B,{title:v||"No Data Available",description:z,showIcon:i,height:j||b||"h-96"})}),!m&&n?.length&&h?e.jsx("div",{className:" border-gray-200",children:e.jsx(xe,{paginationDetails:h,capturePageNum:$,captureRowPerItems:s,initialPage:h?.current_page||1})}):null]})},A=({header:a,removeSortingForColumnIds:n})=>{const m=E(),u=new URLSearchParams(m?.search),h=u.get("order_by")?.split(":")[0],p=u.get("order_by")?.split(":")[1];return n?.includes(a.id)?null:e.jsx("div",{style:{display:"flex",alignItems:"center"},children:h===a.id?p==="asc"?e.jsx(le,{className:"size-4"}):e.jsx(ne,{className:"size-4"}):e.jsx(re,{className:"size-4"})})};export{xe as P,ye as T};
