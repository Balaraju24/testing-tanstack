import{r as t,j as e,u as R,h as L,t as E,B as T}from"./main-CbopZ6M6.js";import{u as F}from"./useMutation-AZp6LET6.js";import{A as _,b as Y}from"./avatar-I9rQhuEx.js";import{a as M}from"./manage-UYlebOZ2.js";import{A as P}from"./approved-Icon-sUM8RCgD.js";import{S as B}from"./submit-case-icon-B5IXmAD9.js";import{T as y}from"./textarea-DVdyI6Fw.js";import{L as S}from"./nyaya-tech-logo-mskrgLnn.js";import"./index-DFgmobCw.js";import"./index-BfzcKS58.js";import"./fetch-BYBqU-UB.js";const D=({initialRating:g=0,totalStars:d=5,onRatingChange:r,disabled:c=!1})=>{const[n,h]=t.useState(g),[i,m]=t.useState(0),o=s=>{c||(h(s),r&&r(s))},u=s=>{c||m(s)},x=()=>{c||m(0)},f=({filled:s,size:l=32})=>e.jsx("svg",{width:l,height:l,viewBox:"0 0 24 24",fill:s?"#facc15":"none",stroke:"black",strokeWidth:"1",strokeLinejoin:"round",strokeLinecap:"round",className:"transition-colors duration-200",children:e.jsx("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})});return e.jsx("div",{className:`flex space-x-1 ${c?"opacity-50 cursor-not-allowed":""}`,role:"radiogroup","aria-label":"Star rating",children:Array.from({length:d},(s,l)=>l+1).map(s=>e.jsx("span",{className:`cursor-pointer ${c?"pointer-events-none":""}`,onClick:()=>o(s),onMouseEnter:()=>u(s),onMouseLeave:x,role:"radio","aria-checked":s===n,"aria-label":`${s} star${s===1?"":"s"}`,children:e.jsx(f,{filled:s<=(i||n)})},s))})},I="/assets/tech-BviejnZ-.svg",$=()=>{const[g,d]=t.useState(""),[r,c]=t.useState({});R();const[n,h]=t.useState(""),[i,m]=t.useState(""),[o,u]=t.useState(void 0),[x,f]=t.useState(!1),[s,l]=t.useState(!1),[v,w]=t.useState(!1),{service_id:k}=L({strict:!1}),{mutate:A,isPending:j}=F({mutationFn:async()=>{const a={review:[{case_id:Number(k),feedback_type:"NYAYA_TECH",rating:o??null,feedback:n||null,is_recommended:!0,suggestion:i,case_stage:"CSCR",case_sub_stage:"CSCR#DSCL"}]};return M(a)},onSuccess:()=>{d(""),w(!0)},onError:a=>{if(a?.status===404||a?.status===401)d(a.message);else if(a.status==422){let p=a.data.errData,b={};Object.keys(p).forEach(N=>{b[N]=p[N][0]}),c(b)}else a.status===409&&E.error(a?.data?.message)}}),C=()=>{A()};return e.jsxs(e.Fragment,{children:[!v&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex bg-[#F0F4FA] justify-between items-center  px-6 border-b-2 border-gray-300  h-12 3xl:h-16",children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("img",{src:S,alt:"",className:"w-40"})})}),e.jsx("div",{className:" bg-gray-100 flex justify-center p-3 h-[calc(100vh-48px)] overflow-auto 3xl:h-[calc(100vh-64px)]",children:e.jsxs("div",{className:" xl:w-3/5 space-y-4",children:[e.jsx("div",{className:" items-center hidden xl:flex",children:e.jsxs("div",{className:"p-2 bg-white grow flex justify-between items-center w-1/5",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_,{className:"w-7 h-7 bg-black flex items-center justify-center",children:e.jsx(Y,{src:I,className:"w-5"})}),"Nyayatech"]}),x&&e.jsx("div",{className:"text-green-700",children:e.jsx(P,{})})]})}),!x&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border border-gray-300 p-3 space-y-1 bg-white",children:[e.jsx("img",{src:S,alt:"",className:"w-40"}),e.jsxs("div",{className:"p-2 border  border-gray-300 space-y-2",children:[e.jsxs("h5",{className:"text-md font-medium",children:[" ","Rating"," ",e.jsx("span",{className:"text-sm text-red-600",children:"*"})]}),e.jsx(D,{initialRating:o,onRatingChange:u})]}),r["review.0.rating"]&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r["review.0.rating"]}),e.jsxs("div",{className:"border border-gray-300 p-3",children:[e.jsxs("h5",{className:"text-md font-medium",children:[" ","Feedback"," ",e.jsx("span",{className:"text-sm text-red-600",children:"*"})]}),e.jsx(y,{className:"border-0  border-gray-300 h-16 resize-none px-1 py-1 ",placeholder:"Your feedback",value:n.charAt(0).toUpperCase()+n.slice(1),onChange:a=>h(a.target.value)})]}),r["review.0.feedback"]&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r["review.0.feedback"]}),e.jsxs("div",{className:"border border-gray-300 p-3",children:[e.jsxs("h5",{className:"text-md font-medium",children:[" ","Suggestions for improvement"]}),e.jsx(y,{className:"border-0  border-gray-300 h-16 resize-none px-1 py-1 ",placeholder:"Your feedback",value:i.charAt(0).toUpperCase()+i.slice(1),onChange:a=>m(a.target.value)})]})]}),e.jsx("div",{className:"space-x-2 flex justify-end ",children:e.jsx(T,{className:"rounded-none text-white text-sm bg-black h-8 py-2 px-5 font-normal hover:bg-black",onClick:C,disabled:j||!o||!n,children:j?"Submitting...":"Submit"})})]})]})})]}),v&&e.jsxs("div",{className:"flex flex-col items-center gap-2 justify-center h-screen",children:[e.jsx("div",{children:e.jsx(B,{})}),e.jsx("div",{className:"text-3xl 3xl:text-6xl text-green-600",children:"Done"}),e.jsxs("div",{className:"text-center space-y-1",children:[e.jsx("div",{className:"text-xl 3xl:text-2xl font-medium",children:"Thank You For Submitting Your Review!"}),e.jsx("div",{className:"text-sm",children:"Your feedback has been successfully submitted"})]})]})]})},Q=$;export{Q as component};
