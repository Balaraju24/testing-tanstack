import{h as y,r as x,t as C,j as t}from"./main-Cfdx-166.js";import{U as v}from"./Provider-ByMBYsBJ.js";import{L as w}from"./Loading-CBYA94ZU.js";import{C as c}from"./checkbox-Cqwp9yie.js";import{l as B}from"./service-7i-FAUkJ.js";import{i as D,M}from"./ManageCaseHeader-C-iqY6N9.js";import{u as A}from"./useDocsApproval-CWwJ3iRq.js";import{u as P}from"./useUserPermissions-EkOdBJwI.js";import{u as U}from"./useMutation-B1DU5d2J.js";import{G as _}from"./GetCaseFiles-CjutET1d.js";import{G as E}from"./GetCaseNotes-DTiXzwk0.js";import"./litigations-CHZYp0Qz.js";import"./fetch-B9iWZIk4.js";import"./manage-N6m0a4Rv.js";import"./useQuery-JrEwn0HC.js";import"./useInfiniteQuery-CsBoIoE-.js";import"./index-FfAIZCaX.js";import"./index-CHQA3myx.js";import"./index-C_gXUdb4.js";import"./index-CUHrv82z.js";import"./index-BoybbV93.js";import"./index-hzHaN75t.js";import"./index-DF_xtgj4.js";import"./check-eR3old9D.js";import"./createLucideIcon-BmLFQ-XG.js";import"./index-lXLfk88N.js";import"./CaseFilingIcon-B3T83UWb.js";import"./legal-notice-icon-CQRroJUz.js";import"./notes-edit-icon-DR2vjJ_2.js";import"./tooltip-Dk48ikt-.js";import"./index-DE95MUWf.js";import"./index-BBlAPqfG.js";import"./manage-B5DlZb4f.js";import"./dayjs.min-CmsQqqGy.js";import"./utc-BVtgXMZy.js";import"./pending-icon-DAWTPq6S.js";import"./approved-Icon-DeOvi-fV.js";import"./current-icon-8I7qxN0n.js";import"./chevron-down-CCzDJ7wY.js";import"./complete-logo-C9qAcUgu.js";import"./notes-close-icon-DwQRAOm_.js";import"./index-DETgyAaU.js";import"./index-Vwln1SHO.js";import"./textarea-HR3ErcZs.js";import"./loader-circle-CtVpcMqj.js";import"./notification-Dr26wPLe.js";import"./fileUpload-C5Dy2rVy.js";import"./index-BjReNNxi.js";import"./x-OEbIHzu5.js";import"./default-user-H6DJgCjJ.js";import"./notes-delete-icon-BGPvWUIE.js";import"./notes-head-icon-B7j4bc-E.js";import"./summary-icon-card-D2HQg2x6.js";import"./avatar-BO1wJRFV.js";import"./input-DYbhqlvz.js";import"./sheet-CMzcKqsy.js";import"./skeleton-CvqsTR7_.js";import"./userDetails-BK07mqDr.js";import"./ApproveRejectDialog-Dk07qzx3.js";import"./DocsCommentsSection-BmQlyRR2.js";import"./card-DY_jjDAj.js";import"./dialog-Cl5SrRCX.js";import"./file-DgjstKY5.js";import"./loader-Dypvt6yb.js";import"./approve-logo-DmVG-5bx.js";import"./apiHelpers-Bpl3N5CG.js";import"./getCaseFilesConstants-BW7ghkNO.js";import"./upload-file-icon-BsU-qCzv.js";import"./delete-stroke-icon-Bw6hM1IS.js";import"./view-icon-BjrB748i.js";import"./separator-V9LYKW80.js";import"./edit-icon-DvPREuVZ.js";import"./reject-icon-BhAL2XaV.js";import"./FileIcon-DdHxYAvu.js";import"./pdf.worker-C_rv1CF2.js";import"./statusConstants-CRfW9VUD.js";function se({stage:l,subStage:m}){const{service_id:b}=y({strict:!1}),[s,d]=x.useState(""),{isUser:r}=P(),{isLoadingCaseNote:u,allDocsIsLoading:f,caseStagesData:g,allDocsData:N,serviceData:h,setServiceData:j}=v(),S=A(),a=D(g?.sub_stages,m),{mutate:k,isPending:n}=U({mutationFn:async o=>await B(b,o),onSuccess:(o,e)=>{j(i=>({...i,confirmation_boxes:{...i?.confirmation_boxes,legal_notice:{sent_by_post:e.status==="sent_by_post"?e.is_marked:!1,sent_by_mail:e.status==="sent_by_mail"?e.is_marked:!1,sent_by_Both:e.status==="sent_by_Both"?e.is_marked:!1}}}))},onError:o=>{C.error(o?.message)}}),p=o=>{const e=s===o;d(e?"":o),k({status:o,is_marked:!e,case_stage:l,case_sub_stage:m})};return x.useEffect(()=>{const o=h?.confirmation_boxes?.legal_notice;if(o){const e=Object.entries(o).find(([,i])=>i===!0)?.[0];d(e||"")}},[h]),t.jsx("div",{className:"h-full",children:t.jsx("div",{className:"h-full px-1",children:t.jsxs("div",{className:"h-full relative",children:[t.jsx(M,{caseStage:l,caseSubStage:m,showActionButton:r()?!1:!!S,showUploadButton:!1}),t.jsx("div",{className:" p-2  w-full h-[calc(100%-60px)] relative overflow-auto ",children:f&&u?t.jsx(w,{loading:f&&u}):t.jsxs("div",{children:[t.jsx(_,{NoticeDraftKey:"Notice Draft"}),!(a&&N?.length===0)&&t.jsxs("div",{className:"flex flex-col gap-2 mt-2 mb-2",children:[t.jsx("div",{children:t.jsxs("span",{className:"font-medium text-base",children:["Notice Sent"," "]})}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("label",{className:"flex items-center cursor-pointer",children:[t.jsx(c,{id:"post",className:"w-4 h-4 mr-2 border-black cursor-pointer",disabled:a||r()||n,checked:s==="sent_by_post",onChange:()=>{},onClick:()=>p("sent_by_post")}),"Sent By Post"]}),t.jsxs("label",{className:"flex items-center cursor-pointer",children:[t.jsx(c,{id:"mail",className:"w-4 h-4 mr-2 border-black cursor-pointer",disabled:a||r()||n,checked:s==="sent_by_mail",onChange:()=>{},onClick:()=>p("sent_by_mail")}),"Sent By Mail"]}),t.jsxs("label",{className:"flex items-center cursor-pointer",children:[t.jsx(c,{id:"both",className:"w-4 h-4 mr-2 border-black cursor-pointer",disabled:a||r()||n,checked:s==="sent_by_Both",onChange:()=>{},onClick:()=>p("sent_by_Both")}),"Sent By Both"]})]})]}),s&&t.jsx(_,{NoticeSentKey:"Notice Sent"}),t.jsx(E,{})]})})]})})})}export{se as default};
