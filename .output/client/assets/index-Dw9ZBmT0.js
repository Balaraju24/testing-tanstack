import{i as y,j as t,r as m,B as k}from"./main-Cfdx-166.js";import{T as C}from"./TanstackTable-vIi7ShkO.js";import{g as D}from"./advocate-D234CMYd.js";import{D as L}from"./advocate-CZvQPyEV.js";import{a as T}from"./app-BaxlpBql.js";import{u as b}from"./useUserPermissions-EkOdBJwI.js";import{u as V}from"./useQuery-JrEwn0HC.js";import{u as E}from"./index-FfAIZCaX.js";import{S as I}from"./SearchFilter-CucxpMqz.js";import{D as z}from"./default-user-H6DJgCjJ.js";import{E as P}from"./edit-note-icon-CA6xFLyb.js";import{M as $,F as H}from"./male-icon-t_3KAY_u.js";import{V as U}from"./view-icon-BjrB748i.js";import{A as f,a as M}from"./avatar-BO1wJRFV.js";import{T as j,a as w,b as v,c as N}from"./tooltip-Dk48ikt-.js";import{g as d}from"./getColorByFirstLetter-JD099_BE.js";import{P as q}from"./plus-CqTDA3jy.js";import"./NoDataBlock-gmsqOTLj.js";import"./no-cases-data-1cuEGLat.js";import"./noDataConstants-nJx6rPaL.js";import"./select-CFrWO_XW.js";import"./index-C_gXUdb4.js";import"./index-CHQA3myx.js";import"./index-DE95MUWf.js";import"./index-hzHaN75t.js";import"./index-Vwln1SHO.js";import"./index-BoybbV93.js";import"./index-CUHrv82z.js";import"./index-BBlAPqfG.js";import"./chevron-down-CCzDJ7wY.js";import"./createLucideIcon-BmLFQ-XG.js";import"./check-eR3old9D.js";import"./skeleton-CvqsTR7_.js";import"./input-DYbhqlvz.js";import"./chevron-right-B9rEYsY4.js";import"./fetch-B9iWZIk4.js";import"./userDetails-BK07mqDr.js";import"./search-BG32cvb7.js";import"./x-OEbIHzu5.js";import"./index-DF_xtgj4.js";function B(){const c=y(),{isAdmin:l}=b();return[{accessorFn:e=>e.serial,id:"serial",header:()=>t.jsx("span",{className:" text-sm",children:"S No"}),footer:e=>e.column.id,width:"50px",maxWidth:"50px",minWidth:"50px",cell:e=>t.jsx("span",{className:"text-sm",children:e.getValue()||"--"})},{accessorFn:e=>{const s=o=>o.replace(/\b\w/g,p=>p.toUpperCase()),a=e.first_name?s(e.first_name):"",r=e.last_name?s(e.last_name):"";return{fullname:`${a} ${r}`,avatar:e.profile_pic||null}},id:"first_name",cell:e=>{const{fullname:s,avatar:a}=e.getValue()||{fullname:"--",avatar:null};return t.jsxs("span",{className:"flex gap-2 items-center",children:[a?t.jsx(f,{className:"w-7 h-7 border-0",children:t.jsx(M,{src:a,className:"object-center"})}):t.jsx(f,{className:"w-7 h-7 flex items-center justify-center rounded-full bg-[#F7F7F7] border border-grey-900",children:t.jsx(z,{className:"w-4 h-4"})}),t.jsx("span",{className:"self-center text-xs truncate w-40",title:s,children:s})]})},width:"160px",maxWidth:"160px",minWidth:"160px",header:()=>t.jsx("span",{className:"text-sm",children:"Name"}),footer:e=>e.column.id},{accessorFn:e=>e.gender,id:"gender",cell:e=>t.jsxs("span",{className:"text-xs flex gap-2 [&_svg]:size-4 items-center ",children:[e.getValue()=="MALE"?t.jsx($,{}):e.getValue()=="FEMALE"?t.jsx(H,{}):null," ",e.getValue()||"--"]}),width:"90px",maxWidth:"90px",minWidth:"90px",header:()=>t.jsx("span",{className:"text-sm",children:"Gender"}),footer:e=>e.column.id},{accessorFn:e=>e.advocate_locations||[],id:"location",cell:e=>{const s=e.getValue();return!Array.isArray(s)||s.length===0?t.jsx("span",{className:"text-xs",children:"--"}):t.jsxs("div",{className:"flex flex-wrap gap-1 items-center",children:[s.slice(0,1).map(a=>{const{background:r,color:o}=d(a.location.name);return t.jsx("div",{className:"px-2 py-1 cursor-pointer rounded-full text-[10px] font-medium w-24 truncate whitespace-nowrap overflow-hidden",style:{backgroundColor:r,color:"#333333"},title:a.location.name,children:a.location.name},a.id)}),s.length>1&&t.jsx(j,{children:t.jsxs(w,{children:[t.jsx(v,{children:t.jsxs("div",{className:"text-[10px] font-normal px-2 rounded-full py-1 bg-sky-200 text-blue-700 cursor-pointer",children:["+",s.length-1]})}),t.jsx(N,{className:"bg-white max-w-xs overflow-y-auto",style:{maxHeight:"150px"},children:s.slice(1).map(a=>{const{background:r,color:o}=d(a.location.name);return t.jsx("div",{className:"px-2 py-1 cursor-pointer rounded-full text-xs 3xl:text-sm font-medium mb-1 w-24 truncate whitespace-nowrap overflow-hidden",title:a.location.name,style:{backgroundColor:r,color:"#333333"},children:a.location.name},a.id)})})]})})]})},width:"150px",maxWidth:"150px",minWidth:"150px",header:()=>t.jsx("span",{className:"text-sm",children:"Location"}),footer:e=>e.column.id},{accessorFn:e=>e.area_of_interest||[],id:"designation",cell:e=>{const s=e.getValue();return!Array.isArray(s)||s.length===0?t.jsx("span",{className:"text-xs",children:"--"}):t.jsxs("div",{className:"flex flex-wrap gap-1 items-center",children:[s.slice(0,1).map(a=>{const{background:r,color:o}=d(a);return t.jsx("div",{title:a,className:"px-2 py-1 cursor-pointer rounded-full text-[10px] font-medium w-24 truncate whitespace-nowrap overflow-hidden",style:{backgroundColor:r,color:"#333333"},children:a},a)}),s.length>1&&t.jsx(j,{children:t.jsxs(w,{children:[t.jsx(v,{children:t.jsxs("div",{className:"text-[10px] font-normal px-2 rounded-full py-1 bg-sky-200 text-blue-700 cursor-pointer",children:["+",s.length-1]})}),t.jsx(N,{className:"bg-white max-w-xs overflow-y-auto",style:{maxHeight:"150px"},children:s.slice(1).map(a=>{const{background:r,color:o}=d(a);return t.jsx("div",{className:"px-2 py-1 cursor-pointer rounded-full text-xs 3xl:text-sm font-medium mb-1 w-24 truncate whitespace-nowrap overflow-hidden",style:{backgroundColor:r,color:"#333333"},title:a,children:a},a)})})]})})]})},width:"170px",maxWidth:"170px",minWidth:"170px",header:()=>t.jsx("span",{className:"text-sm",children:"Area of Interest"}),footer:e=>e.column.id},{accessorFn:e=>e.email,id:"email",cell:e=>t.jsx("div",{className:"text-xs truncate w-32 2xl:w-full",title:e.getValue(),children:e.getValue()||"--"}),width:"150px",maxWidth:"150px",minWidth:"150px",header:()=>t.jsx("span",{className:"text-sm",children:"Email"}),footer:e=>e.column.id},{accessorFn:e=>e.phone?e.phone.replace(/^(\+91)(\d{5})(\d{5})$/,"$1 $2$3"):"--",id:"phone",cell:e=>t.jsx("span",{className:"text-xs",children:e.getValue()??"--"}),width:"120px",maxWidth:"120px",minWidth:"120px",header:()=>t.jsx("span",{className:"text-sm",children:"Phone"}),footer:e=>e.column.id},{accessorFn:e=>e.actions,id:"actions",cell:e=>t.jsxs("div",{className:"table-action-buttons flex space-x-3   items-center  cursor-pointer",children:[t.jsx("span",{onClick:()=>{c.navigate({to:`/view-advocate/${e.row.original.id}`})},title:"View Advocate",children:t.jsx(U,{className:"size-4"})}),!l()&&t.jsx("span",{onClick:()=>{c.navigate({to:`/edit-advocate/${e.row.original.id}`})},title:"Edit Advocate",children:t.jsx(P,{className:"size-4 text-black"})})]}),header:()=>t.jsx("span",{className:"text-sm",children:"Actions"}),footer:e=>e.column.id,width:"80px",minWidth:"80px",maxWidth:"80px"}]}const G=({heightClass:c=L})=>{const l=y(),e=E(),s=new URLSearchParams(e.search),[a,r]=m.useState(s.get("search_string")||""),[o,p]=m.useState(s.get("search_string")||""),[x,h]=m.useState({current_page:Number(s.get("page"))||1,page_size:Number(s.get("page_size"))||15}),{isAdmin:_}=b(),A=B(),{isLoading:S,data:g,refetch:R}=V({queryKey:["advocate",x,o],queryFn:async()=>{let i={page:x.current_page,page_size:x.page_size,user_type:"ADVOCATE",...o&&{search_string:o}};const n=await D(i);if(n.status===200||n.status===201){const{records:W,pagination_info:u}=n?.data?.data;return{records:T(W,u.current_page,u.page_size)||[],pagination_info:u}}l.navigate({to:"/advocates",search:i})},enabled:!0,refetchOnWindowFocus:!1}),F=async({page:i,page_size:n})=>{h({current_page:i,page_size:n})};return m.useEffect(()=>{const i=setTimeout(()=>{h(n=>({...n,current_page:a?n.current_page:1})),p(a)},1e3);return()=>clearTimeout(i)},[a]),t.jsx("div",{className:"overflow-hidden h-full relative",children:t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"flex justify-end items-center gap-x-8 mb-2",children:t.jsxs("div",{className:"flex gap-x-3",children:[t.jsx(I,{searchString:a,setSearchString:r,title:"Search by name"}),!_()&&t.jsx(k,{className:"bg-black !text-white hover:bg-gray-800 cursor-pointer group focus:ring-none active:scale-95 !rounded-none h-9 px-6 py-0 transition duration-300 text-sm  3xl:text-base font-normal",onClick:()=>l.navigate({to:"/create-advocate"}),children:t.jsxs("span",{className:"flex items-center space-x-2",children:[t.jsx(q,{className:"font-extralight w-6 h-6 group-hover:rotate-90 duration-300 "}),t.jsx("span",{className:"font-extralight",children:"Add Advocate"})]})})]})}),t.jsx("div",{className:"",children:t.jsx(C,{data:g?.records||[],columns:A,paginationDetails:g?.pagination_info||{},getData:F,loading:S,removeSortingForColumnIds:["serial","actions","first_name","gender","designation","email","phone","location"],heightClass:c,noDataLabel:"advocates",noDataDescription:"Get started by creating your first advocate",showNoDataIcon:!0,noDataHeight:"h-[calc(100vh-170px)]"})})]})})},Ve=G;export{Ve as component};
