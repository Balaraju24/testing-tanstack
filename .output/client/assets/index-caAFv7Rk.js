import{i as j,j as a,k as b,r as l,B as v}from"./main-CbopZ6M6.js";import{T as y}from"./TanstackTable-OjcbGlVt.js";import{u as S}from"./useQuery-aXFamHAp.js";import{S as F}from"./SearchFilter-BBJ8x_iV.js";import{D as A}from"./advocate-CZvQPyEV.js";import{a as z}from"./app-BaxlpBql.js";import{g as W}from"./advocate-DDA6A40v.js";import{D as E}from"./default-user-B5Qt0uKr.js";import{E as k}from"./edit-note-icon-BxPNNpfJ.js";import{M as C,F as D}from"./male-icon-DSiLKajY.js";import{V as T}from"./view-icon-Ctx0vsE9.js";import{A as f,a as V}from"./avatar-I9rQhuEx.js";import{T as I,a as L,b as M,c as P}from"./tooltip-BNtdrHqg.js";import{g}from"./getColorByFirstLetter-JD099_BE.js";import{P as $}from"./plus-DadH4F41.js";import"./NoDataBlock-B_IMWKz8.js";import"./no-cases-data-D0ClwAfz.js";import"./useUserPermissions-DqHuV15h.js";import"./userDetails-BKeSBteA.js";import"./noDataConstants-nJx6rPaL.js";import"./index-Bz18Tu21.js";import"./index-DFgmobCw.js";import"./select-BAZmUwVY.js";import"./index-CXHJR4o1.js";import"./index-NA-xklZo.js";import"./index-BfzcKS58.js";import"./index-BrJXLgSY.js";import"./index-C-zDLRzy.js";import"./index-DGqRz6qL.js";import"./index-CB5qnijn.js";import"./chevron-down-DFI8aQgh.js";import"./createLucideIcon-2fvSvvVa.js";import"./check-CKzaR09m.js";import"./skeleton-CGIrBuj0.js";import"./input-BFw7NH1J.js";import"./chevron-right-63yA6sUh.js";import"./search-ElaKESin.js";import"./x-ClszbkRs.js";import"./fetch-BYBqU-UB.js";import"./index-BYuWQ9Ar.js";function G(){const m=j();return[{accessorFn:e=>e.serial,id:"serial",header:()=>a.jsx("span",{className:" text-sm",children:"S No"}),footer:e=>e.column.id,width:"50px",maxWidth:"50px",minWidth:"50px",cell:e=>a.jsx("span",{className:"text-sm",children:e.getValue()||"--"})},{accessorFn:e=>{const t=r=>r.replace(/\b\w/g,p=>p.toUpperCase()),s=e.first_name?t(e.first_name):"",i=e.last_name?t(e.last_name):"";return{fullname:`${s} ${i}`,avatar:e.profile_pic||null}},id:"first_name",cell:e=>{const{fullname:t,avatar:s}=e.getValue()||{fullname:"--",avatar:null};return a.jsxs("span",{className:"flex gap-2 items-center",children:[s?a.jsx(f,{className:"w-7 h-7 border-0",children:a.jsx(V,{src:s,className:"object-center"})}):a.jsx(f,{className:"w-7 h-7 flex items-center justify-center rounded-full bg-[#F7F7F7] border border-grey-900",children:a.jsx(E,{className:"w-4 h-4"})}),a.jsx("span",{className:"self-center text-xs truncate w-40",title:t,children:t})]})},width:"160px",maxWidth:"160px",minWidth:"160px",header:()=>a.jsx("span",{className:"text-sm",children:"Name"}),footer:e=>e.column.id},{accessorFn:e=>e.gender,id:"gender",cell:e=>a.jsxs("span",{className:"text-xs flex gap-2 [&_svg]:size-4 items-center ",children:[e.getValue()=="MALE"?a.jsx(C,{}):e.getValue()=="FEMALE"?a.jsx(D,{}):null," ",e.getValue()||"--"]}),width:"90px",maxWidth:"90px",minWidth:"90px",header:()=>a.jsx("span",{className:"text-sm",children:"Gender"}),footer:e=>e.column.id},{accessorFn:e=>e.location?.name,id:"location",cell:e=>{const t=e.getValue(),{background:s,color:i}=g(t||"");return a.jsx("div",{className:"text-xs flex gap-2 [&_svg]:size-4 cursor-pointer items-center px-2 py-1 rounded-full w-24 truncate whitespace-nowrap overflow-hidden",title:t,style:{backgroundColor:s,color:"#333333",border:`1px solid ${s}`},children:a.jsx("span",{className:"truncate w-32 ",children:t||"--"})})},width:"120px",maxWidth:"120px",minWidth:"120px",header:()=>a.jsx("span",{className:"text-sm",children:"Location"}),footer:e=>e.column.id},{accessorFn:e=>e.area_of_interest||[],id:"designation",cell:e=>{const t=e.getValue();return!Array.isArray(t)||t.length===0?a.jsx("span",{className:"text-xs",children:"--"}):a.jsxs("div",{className:"flex flex-wrap gap-1 items-center",children:[t.slice(0,1).map(s=>{const{background:i,color:r}=g(s);return a.jsx("div",{title:s,className:"px-2 py-1 cursor-pointer rounded-full text-[10px] font-medium w-24 truncate whitespace-nowrap overflow-hidden",style:{backgroundColor:i,color:"#333333",border:`1px solid ${i}`},children:s},s)}),t.length>1&&a.jsx(I,{children:a.jsxs(L,{children:[a.jsx(M,{children:a.jsxs("div",{className:"text-[10px] font-normal px-2 rounded-full py-1 bg-sky-200 text-blue-700 cursor-pointer",children:["+",t.length-1]})}),a.jsx(P,{className:"bg-white max-w-xs overflow-y-auto",style:{maxHeight:"150px"},children:t.slice(1).map(s=>{const{background:i,color:r}=g(s);return a.jsx("div",{className:"px-2 py-1 cursor-pointer rounded-full text-xs 3xl:text-sm font-medium mb-1 w-24 truncate whitespace-nowrap overflow-hidden",style:{backgroundColor:i,color:"#333333"},title:s,children:s},s)})})]})})]})},width:"170px",maxWidth:"170px",minWidth:"170px",header:()=>a.jsx("span",{className:"text-sm",children:"Area of Interest"}),footer:e=>e.column.id},{accessorFn:e=>e.email,id:"email",cell:e=>a.jsx("div",{className:"text-xs truncate w-32 2xl:w-full",title:e.getValue(),children:e.getValue()||"--"}),width:"150px",maxWidth:"150px",minWidth:"150px",header:()=>a.jsx("span",{className:"text-sm",children:"Email"}),footer:e=>e.column.id},{accessorFn:e=>e.phone?e.phone.replace(/^(\+91)(\d{5})(\d{5})$/,"$1 $2$3"):"--",id:"phone",cell:e=>a.jsx("span",{className:"text-xs",children:e.getValue()??"--"}),width:"120px",maxWidth:"120px",minWidth:"120px",header:()=>a.jsx("span",{className:"text-sm",children:"Phone"}),footer:e=>e.column.id},{accessorFn:e=>e.actions,id:"actions",cell:e=>a.jsxs("div",{className:"table-action-buttons flex space-x-3   items-center  cursor-pointer",children:[a.jsx("span",{onClick:()=>{m.navigate({to:`/view-manager/${e.row.original.id}`})},title:"View Manager",children:a.jsx(T,{className:"size-4"})}),a.jsx("span",{onClick:()=>{m.navigate({to:`/edit-manager/${e.row.original.id}`})},title:"Edit Manager",children:a.jsx(k,{className:"size-4 text-black"})})]}),header:()=>a.jsx("span",{className:"text-sm",children:"Actions"}),footer:e=>e.column.id,width:"80px",minWidth:"80px",maxWidth:"80px"}]}const H=({heightClass:m=A})=>{const e=j(),t=b({strict:!1}),[s,i]=l.useState(t.search_string||""),[r,p]=l.useState(t.search_string||"");console.log("searchString",s);const[c,x]=l.useState({current_page:Number(t.page)||1,page_size:Number(t.page_size)||15}),N=G(),{isLoading:_,data:h}=S({queryKey:["manager",c,r],queryFn:async()=>{let n={page:c.current_page,page_size:c.page_size,user_type:"MANAGER",...r&&{search_string:r}};const o=await W(n);if(o.status===200||o.status===201){const{records:d,pagination_info:u}=o?.data?.data;return{records:z(d,u.current_page,u.page_size)||[],pagination_info:u}}e.navigate({to:"/managers",search:{page:n.page,page_size:n.page_size,...r&&{search_string:r}}})},enabled:!0,refetchOnWindowFocus:!1}),w=async({page:n,page_size:o})=>{x({current_page:n,page_size:o})};return l.useEffect(()=>{const n=setTimeout(()=>{x(o=>({...o,current_page:s?o.current_page:1})),p(s)},1e3);return()=>clearTimeout(n)},[s]),l.useEffect(()=>{const n=Number(t.page)||1,o=Number(t.page_size)||15,d=t.search_string||"";x({current_page:n,page_size:o}),i(d),p(d)},[t.page,t.page_size,t.search_string]),l.useEffect(()=>{const n={page:c.current_page,page_size:c.page_size,...r&&{search_string:r}};e.navigate({search:n,replace:!0})},[c.current_page,c.page_size,r,e]),a.jsx("div",{className:"overflow-hidden h-full relative",children:a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex justify-end items-center gap-x-8 mb-2",children:a.jsxs("div",{className:"flex gap-x-3",children:[a.jsx(F,{searchString:s,setSearchString:i,title:"Search by name"}),a.jsx(v,{className:"bg-black !text-white hover:bg-gray-800 cursor-pointer group focus:ring-none active:scale-95 !rounded-none h-9 px-6 py-0 transition duration-300 text-sm  3xl:text-base font-normal",onClick:()=>e.navigate({to:"/create-manager"}),children:a.jsxs("span",{className:"flex items-center space-x-2",children:[a.jsx($,{className:"font-extralight w-6 h-6 group-hover:rotate-90 duration-300 "}),a.jsx("span",{className:"font-extralight",children:"Add Manager"})]})})]})}),a.jsx("div",{className:"",children:a.jsx(y,{data:h?.records||[],columns:N,paginationDetails:h?.pagination_info||{},getData:w,loading:_,removeSortingForColumnIds:["serial","actions","first_name","gender","designation","email","phone","location"],heightClass:m,noDataLabel:"advocates",noDataDescription:"Get started by creating your first advocate",showNoDataIcon:!0,noDataHeight:"h-[calc(100vh-170px)]"})})]})})},Ee=H;export{Ee as component};
